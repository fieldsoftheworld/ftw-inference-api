# FTW Inference API Environment Configuration
# Copy this file to .env and customize values as needed

# ==========================================
# API Configuration
# ==========================================
API__TITLE="Fields of the World - Inference API"
API__DESCRIPTION="A service for field boundary inference from satellite images."
API__VERSION="0.1.0"

# ==========================================
# Server Configuration
# ==========================================
SERVER__HOST="0.0.0.0"
SERVER__PORT=8000
SERVER__DEBUG=false
SERVER__DATABASE_URL="sqlite:///./data/ftw_inference.db"

# ==========================================
# CORS Configuration
# ==========================================
CORS__ORIGINS=["*"]

# ==========================================
# Security Configuration (REQUIRED!)
# ==========================================
# IMPORTANT: Generate a secure secret key for production!
# Example: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECURITY__SECRET_KEY="secret_key"
SECURITY__ALGORITHM="HS256"
SECURITY__ACCESS_TOKEN_EXPIRE_MINUTES=30
SECURITY__AUTH_DISABLED=true

# ==========================================
# Processing Configuration
# ==========================================
PROCESSING__MIN_AREA_KM2=100.0
PROCESSING__MAX_AREA_KM2=500.0
PROCESSING__MAX_CONCURRENT_EXAMPLES=10
PROCESSING__EXAMPLE_TIMEOUT=60
# GPU device index (null for CPU, 0 for first GPU, etc.)
PROCESSING__GPU=0

# ==========================================
# Logging Configuration
# ==========================================
LOGGING__LEVEL="INFO"
LOGGING__FORMAT="json" # json | text

# ==========================================
# CloudWatch Configuration
# ==========================================
CLOUDWATCH__ENABLED=false
CLOUDWATCH__LOG_GROUP="/ftw-inference-api"
CLOUDWATCH__LOG_STREAM_PREFIX="app"
CLOUDWATCH__REGION="us-west-2"
CLOUDWATCH__SEND_INTERVAL=30
CLOUDWATCH__MAX_BATCH_SIZE=10

# ==========================================
# Storage Configuration
# ==========================================
# Storage backend: "local", "s3", "source_coop"
STORAGE__BACKEND="local"

# S3 and Source Coop settings (required if backend is "s3" or "source_coop")
STORAGE__BUCKET_NAME="dev-ftw-api-model-outputs-2140860f"
STORAGE__REGION="us-west-2"
STORAGE__PRESIGNED_URL_EXPIRY=3600

# Source Coop specific settings (used only if backend is "source_coop")
STORAGE__ENDPOINT_URL="https://data.source.coop"
STORAGE__REPOSITORY_PATH="ftw-inference-output"
STORAGE__USE_SECRETS_MANAGER=false
# If using secrets manager:
# STORAGE__SECRET_NAME="ftw/source-coop/api-credentials"
# STORAGE__SECRETS_MANAGER_REGION="us-west-2"
# If NOT using secrets manager:
# STORAGE__ACCESS_KEY_ID=""
# STORAGE__SECRET_ACCESS_KEY=""

# Alternative: Direct S3 access (for source_coop backend)
STORAGE__USE_DIRECT_S3=false
# STORAGE__DIRECT_S3_BUCKET=""
# STORAGE__DIRECT_S3_REGION=""

# Local storage settings (used only if backend is "local")
STORAGE__OUTPUT_DIR="data/results"
STORAGE__TEMP_DIR="data/temp"
STORAGE__MAX_FILE_SIZE_MB=100

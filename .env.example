# FTW Inference API Environment Configuration
# Copy this file to .env and customize values as needed

# ==========================================
# API Configuration
# ==========================================
API__TITLE="Fields of the World - Inference API"
API__DESCRIPTION="A service for field boundary inference from satellite images."
API__VERSION="0.1.0"

# ==========================================
# Server Configuration
# ==========================================
SERVER__HOST="0.0.0.0"
SERVER__PORT=8000
SERVER__DEBUG=false

# ==========================================
# CORS Configuration
# ==========================================
CORS__ORIGINS=["*"]

# ==========================================
# Security Configuration (REQUIRED!)
# ==========================================
# IMPORTANT: Generate a secure secret key for production!
# Example: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECURITY__SECRET_KEY="secret_key"
SECURITY__ALGORITHM="HS256"
SECURITY__ACCESS_TOKEN_EXPIRE_MINUTES=30
SECURITY__AUTH_DISABLED=true

# ==========================================
# Processing Configuration
# ==========================================
PROCESSING__MIN_AREA_KM2=100.0
PROCESSING__MAX_AREA_KM2=500.0
PROCESSING__MAX_CONCURRENT_EXAMPLES=10
PROCESSING__EXAMPLE_TIMEOUT=60
# GPU device index (null for CPU, 0 for first GPU, etc.)
PROCESSING__GPU=0

# ==========================================
# Logging Configuration
# ==========================================
LOGGING__LEVEL="INFO"
LOGGING__FORMAT="json" # json | text

# ==========================================
# CloudWatch Configuration
# ==========================================
CLOUDWATCH__ENABLED=false
CLOUDWATCH__LOG_GROUP="/ftw-inference-api"
CLOUDWATCH__LOG_STREAM_PREFIX="app"
CLOUDWATCH__REGION="us-west-2"
CLOUDWATCH__SEND_INTERVAL=30
CLOUDWATCH__MAX_BATCH_SIZE=10

# ==========================================
# DynamoDB Configuration
# ==========================================
DYNAMODB__AWS_REGION="us-west-2"
# For local development with DynamoDB Local (optional)
# DYNAMODB__DYNAMODB_ENDPOINT="http://localhost:8001"
DYNAMODB__TABLE_PREFIX="dev-ftw-"

# AWS Credentials for local DynamoDB (use fake values for local development)
# AWS_ACCESS_KEY_ID="fake_key_id"
# AWS_SECRET_ACCESS_KEY="fake_secret_key"

# ==========================================
# Storage Configuration
# ==========================================
# Storage backend: "local" or "source_coop"
STORAGE__BACKEND="local"

# Local storage settings
STORAGE__OUTPUT_DIR="data/results"
STORAGE__MAX_FILE_SIZE_MB=1000

# Source Coop settings (only used if backend is "source_coop")
STORAGE__SOURCE_COOP__BUCKET_NAME="ftw"
STORAGE__SOURCE_COOP__REGION="us-west-2"
STORAGE__SOURCE_COOP__ENDPOINT_URL="https://data.source.coop"
STORAGE__SOURCE_COOP__REPOSITORY_PATH="ftw-inference-output"
STORAGE__SOURCE_COOP__ACCESS_KEY_ID=""
STORAGE__SOURCE_COOP__SECRET_ACCESS_KEY=""
STORAGE__SOURCE_COOP__USE_SECRETS_MANAGER=false
# If using secrets manager:
# STORAGE__SOURCE_COOP__SECRET_NAME="ftw/source-coop/api-credentials"
# STORAGE__SOURCE_COOP__SECRETS_MANAGER_REGION="us-west-2"

# TEMPORARY: STS workaround for Source Coop API access - Remove when API is fixed
STORAGE__SOURCE_COOP__USE_STS_WORKAROUND=true # flag to enable/disable entire workaround
